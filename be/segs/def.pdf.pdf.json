[
    "202414 CHSEM ALS #AlS}ScH Eq ry",
    "Split-Capacitive SAR-ADC based on Efficient Code-Width Calibration한정욱, 김병호한양대학교 전자공학과: han071416@naver.com, brandonkim@hanyang.ac.krSplit-Capacitive SAR-ADC based on Efficient Code-Width Calibration",
    "Jeongwook Han and Byoungho Kim Hanyang University",
    "AbstractSuccessive-approximation-resistor (SAR) analog-to-digital converter (ADC) suffers from the linearity degraded by mismatch in the bridge capacitor and parasitic capacitances from the least-significant-bit (LSB) capacitor array. This paper proposes a foreground calibration design scheme to apply a perfectly linear ramp signal to an ADC under calibration, and to quantify the errors in the wide code width using the proposed width detection block in the postprocessing manner. To validate the performance of this work, the simulation was performed with a 12-bit split-capacitive SAR ADC, and the DNL and the INL results were reduced (enhanced) by 6.03LSB and 3.01LSB, respectively.구조로 나뉜다. 먼저 binary-weighted array digital-to-analog converter capacitive (DAC)는 high linearity를 보여주지만, resolution이 증가함에 따라 CDAC 면적이 증가하여 속도가 감소하고 layout complexity가 높아진다. 따라서 low speed and high resolution application에 적용된다. 두 번째는 split capacitive array DAC로 binary weighted DAC에 비 하여 적은 unit capacitor가 필요하므로 같은 해상도에 compact area와 high speed를 얻을 수 있다.하지만, split capacitive DAC에서 bridge capacitor의 mismatch와 LSB array capacitors의 top plate parasitic capacitance는 Ramp Histogram Test [3]에서 wide code width의 원인이 된다 [2]. Transfer curve의 wide code width는 SAR ADC의 nonlinearity를 증가 시키기 때문에 wide code wdith로 인한 nonlinearity를 보정하기 위하여 몇몇 calibration 방식들이 발표되고 있다. [1-2]",
    "I. 서론Successive approximation register analog-to-digital converter (SAR ADC)는 pipelined ADC, Delat sigma ADC에 비하여 간단한 architecture와 dynamic operation으로 인해 medium speed(10MS/s-100 MS/s) 와 high resolution(8-14b) application에 널리 사용되고 있다 [1]. SAR ADC는 sample and hold, sar logic, capacitive array, comparator로 이루어져 있으며 capacitive array의 구조에 따라 일반적으로 2가지논문 [1] 은 foreground digital calibration 방식을 사 용한다. 먼저 digital output code 중 calibration이 필요 한 code를 Dcal에 저장한 후, digital output code가 Dcal에 포함되면 calibration을 수행한다. 해당 code의 ±1LSB 범위 내에서 무작위로 하나의 코드를 선택하여 calibration을 진행한다. 이 방법은 LSB array 및 bridge capacitor의 mismatch로 인한 nonlinearity를 모 두 효과적으로 calibration 할 수 있다. ±1LSB 범위 내 에서 wide code width를 가지는 코드 개수를 분배함 으로써 DNL은 개선되지만, 분배 범위가 제한적이고code가 ±1LSB 범위 내에서 무작위로 선택되기 때문에 INL의 개선 효과는 상대적으로 크지 않다. 논문 [2]는 foreground analog calibration으로 9bit split SAR ADC에서 하위 5bit이 모두 1인 코드와 하위 4bit이 1 이고 5번째 비트가 0인 코드의 개수를 세고 비교하여 missing code와 wide code width를 감지한다. 그리고 calibration cdac을 LSB array에 추가하여 analog calibration을 진행한다. 해당 방식은 digital calibration 보다 정확할 수 있지만, 추가적인 CDAC에 대한 capacitor mismatch를 보장할 수 없다.논문에서는 LSB array의 gain error로 발생하는 wide code error를 calibration 하기 위해 bridge capacitor의 크기를 nominal 값보다 작게 디자인 했다. 이때 bridge capacitor는 식 (3)처럼 LSB array의 top-plate의 parasitic capacitance를 고려하여 negative DNL이 나 오지 않도록 크기를 설정한다.실제 SAR ADC 동작은 differential 하게 동작하지만 본 논문에서는 single-ended 동작으로 다룬다. SAR ADC의 conversion을 모두 마쳤을 때 (4)과 같이 표현 된다.본 논문에서는 split CDAC에서 bridge capacitor의 mismatch로 인한 transfer curve의 wide code width와 nonlinearity를 보상하기 위한 foreground digital post processing을 제안한다.",
    "II. Nonlinearity analysis2.1 Bridge capacitor의 nonlinearityDot Prot Put [sar여기서 M과 N은 각각 MSB array와 LSB array의 bit수 이며 는 i번째 digital output code를 의미한다. 는 LSB array의 linearity error factor를 의미하며 식 (5)와 같다.",
    "그림 1. SAR ADC 구조그림 1은 논문에서 제안하는 split-CDAC을 사용하는 12-bit SAR ADC의 구조를 간단하게 single-ended 구 조로 나타낸 것이다. 13개의 binary weighted capacitor로 구성되어 있으며 각 capacitor의 크기는선형성이 보장되기 위해서는 식 (6)을 만족해야 한다. 여기서 알 수 있듯이 bridge capacitor의 mismatch가 음수일 때, LSB array의 모든 비트 가 1인 코드마다 wide code width가 나타남을 확인할 수 있다.≤ ≤ ≤ ≤ (1)2.2 Wide code hit 개수 추정",
    "이고 여기서 는 unit capacitor의 크기이다.해당 구조의 nonlineartiy의 원인은 2가지가 있다. 먼 저 식 (2)처럼 이상적인 경우에도 bridge capacitor의 크기가 unit capacitor의 정수배가 아닌 분수의 크기이 기 때문에 정확하게 layout이 될 수 없다. 그리고 bridge capacitor의 mismatch와 LSB array의 top plate parasitic capacitance로 선형성이 감소한다. 본본 논문에서는 식 (5)를 통해서 wide code width를 가지는 code에 대한 hit 개수를 추정한 다. “xxxxxx111111”인 코드마다 wide width가 일어나므로 코드 63에 대한 hit 개수를 추정한다. code≤ ↔ × ≤ × ×먼저 코드 63에 대한 input 범위는 식(7)과 같이202414 CHSEM ALS atecH Eq ry정의 할 수 있으며 LSB code width를 식(8)과같이 구할 수 있다. Ramp Histogram Test에서 ramp signal에 설정한 code마다의 hit을 hit per code(HPC) 라 하며 이를 이용하여 식 (9)처럼 코드 63 의 hit 개수는×이고 H(i)는 i번째 hit 개수이며 자연수이기 때문 에 소수점을 버리는 floor 함수를 적용한다.",
    "Ⅲ. Proposed calibration method3.1 Wide code width detectionSAR ADC에 positive DNL을 유도하기 위해 bridge capacitor를 적게 주었다고 하더라도 해당 ADC의 wide code error를 감지하고 proposed method에 사용 될 wide code width를 가지는 code의 hit 개수를 측정 하기 위해서 wide code error detection block을 calibration block 앞에 배치한다. II를 통해서 bridge capacitor의 negative mismatch가 있을 때, 하위 6bit가 모두 1인 digital output code에서 wide code width가 발생한다. 따라서 ramp histogram test time을 고려하 여 입력을 코드 0부터 64에 대한 ramp signal을 입력 한다.Day 12-b D, 10bit Counter Enable Signal Foc —",
    "3.2 Uniform ramp calibration in wide code widthBridge capacitor에 negative mismatch가 있는 SAR ADC에 ramp histogram test를 진행하면 LSB가 모두 1인 코드마다 wide code width를 가지고 그 외 나머 지는 narrow code width를 가진다. 본 논문에서 제안 하는 calibration 방법은 wide code를 기준으로 ±32LSB 범위에서 일정한 hit 개수를 가지는 uniform ramp signal을 생성한다. 따라서 ramp histogram test 에서 wide code width를 가지는 code (=wide code)의 hit 개수를 narrow code width를 가지는 code (= narrow code)에 재분배하는 digital post processing을 통해 SAR ADC의 transfer curve의 linearity를 보정 한다 [1]. Wide code의 개수를 narrow code로 재분배 해주기 위해서 wide code의 hit 개수를 64로 나누어 floor 함수를 사용하여 개수를 구한다. 하지만 실제 회 로에서는 floor 함수를 사용하지 못하므로 10bit shift register를 사용하여 대체 하면 10bit counter의 digital code를 받아 6bit만큼 shift right 을 하여 1/64이 적용 된 10bit 중 하위 4bit를 출력한다.~ Dsne Wide code width ti = Last 4b calibration bloci +H eal libration block 4 bit Counter | Deou Reset Deat Peat at 12-5 Deat Cad Calibration counter | = Dout + 33LSB DisD10DaDaD7D4) DsD,D3D2D1Do | Ds fo DyD3D2D;D = 11111 c Reset그림 3. Wide code width calibration block 구조그림 2. Wide code width detection block 구조그림2와 같이 Wide code error를 감지하기 위해서 Digital output code 중 하위 6bit가 “111111”인 코드를 받아 counter로 개수를 세어 Ramp Histogram Test에 서 코드 당 찍히는 hit 개수(Hit Per Code, HPC)와 비 교한다. 만약 개수가 100개라 한다면, wide code width는 이론상 code의 HPC가 2배 되었을 경우이다 [3]. II를 통해 구한 wide code의 hit 개수를 가지고 해 당 counter의 비트 수를 정하며 10% negative mismatch가 bridge capacitor에 있을 때, 10bit counter 사용한다. 그림 2와 같이 10bit counter 출력이 200일 때 wide code width를 가지는 것을 감지한다 [2]. 그리 고 10bit counter의 digital code와 Enable 신호를 wide code width calibration block에 입력하여 calibration을 진행한다.그림 3과 같이 Wide code width를 제거하기 위해서 wide code width detection block의 출력인 10bit counter digital code와 enable 신호를 받아서 재분배할 개수를 먼저 만든다. 그리고 SAR ADC digital output code를 calibration 하기 위해서 하위 6bit가 모두 1인 output code를 받는다. 해당 코드에서 –32LSB부터 재 분배 개수만큼의 hit 개수를 가지는 ramp signal을 만 들기 위해서 6번째 bit를 0으로 바꾸고 calibration counter에 입력한다. 10bit shift register의 output과 같 은 4bit counter는 재분배 개수를 세는 counter (= redistribution counter)로 정의된다. 해당 counter와 shift register의 output이 같아질 때, 해당 코드에 재분 배가 다 되었음을 뜻하므로 digital output code를 +1LSB를 해주기 위해 calibration counter에 clock으로 입력한다. 그리고 4bit redistribution counter의 reset 신호로도 사용한다. 마지막으로 +1LSB 씩 증가하여 출력되는 Dcal이 해당 wide code의 +33 LSB에 해당 하는 digital code가 되었을 때 calibration counter를202414 CHSEM ALS for 2 cy i pay or re ireset 하여 calibration을 멈추고 다음 wide code를 기 다린다.Ⅳ. 시뮬레이션 결과본 논문에서 제안하는 foreground digital post processing의 성능을 측정하기 위해 MATLAB을 이용 하여 behavior model simulation을 진행했다. II에서 설 명한 12-bit SAR ADC를 모델링하였고 bridge capacitor의 크기는 LSB array의 top-plate parasitic capacitance를 고려하여 1.3로 설정하였다 [4]. Bridge capacitor의 mismatch는 1.3에 10% negative mismatch를 주었다. 정확한 모델링을 위해 CDAC의 binary weighted capacitor 들은 unit capacitor의 합으 로 구성하였다. 각각의 capacitor들의 mismatch는 고려 하지 않았기 때문에 따로 설정하지 않았다. DNL은 그 림4와 같이 +6.23/-0.1LSB에서 +0.1/-0.2LSB로 향상되 었으며, 모든 wide code가 사라진 것을 확인할 수 있 다. 그리고 INL은 +6.31/-6.03LSB에서 +3.3/-3.03LSB 로 향상되었다.과 DNL은 6.23에서 0.2로 향상되어 wide code가 제거 됐고, INL은 6.31에서 3.3으로 감소하였다. 논문에서 제안하는 보정 방식을 적용하여 [1]보다 INL의 감소 변화를 2배 가까이 줄여 wide code width에 의한 transfer curve의 nonlinearity를 보정 할 수 있다.",
    "Acknowledgement이 논문은 2024년도 정부(교육부)의 재원으로 한국연 구재단의 지원을 받아 수행된 기초연구사업임(No. 2016R1D1A1B02013884). 이 연구는 2024년도 정부(산 업통상자원부)의 재원으로 한국산업기술 진흥원의 지 원을 받아 수행된 연구임(P0012451, 0000년 산업전문 인력역량강화사업). 본 연구는 산업통상자원부 (1415180306)와 KSRC 지원 사업인 미래반도체소자 원 천기술개발사업(20019164)의 연구결과로 수행되었음. 본 연구는 IDEC에서 EDA Tool를 지원받아 수행함.DNL 2000 1500 Output code (a) 2000 2500 3000 3500 4000INL Before cal er al ° 500 1000 1500 2000 Output code (b) 2500 3000 3500",
    "참고문헌[1] Y. Zhu et al., \"Split-SAR ADCs: Improved Linearity With Power and Speed Optimization,\" in IEEE Transactions on Very Large Scale Integration (VLSI) Systems, vol. 22, no. 2, pp. 372-383, Feb. 2014, doi: 10.1109/TVLSI.2013.2242501.[2] R. Huang, L. Shao, W. Wang, G. Sun and X. Zhu, \"An error codes detection based background calibration for split SAR ADC,\" 2015 IEEE International Conference on Electron Devices and Solid-State Circuits (EDSSC), Singapore, 2015, pp. 150-153, doi: 10.1109/EDSSC.2015.7285072.그림 4. Calibration 전후의 DNL/INL 결과",
    "Ⅴ. 결론 및 향후 연구방향본 논문에서는 12-bit split-CDAC SAR ADC의 wide code width를 제거하여 linearity를 개선 시키기 위한 foreground digital post processing 방식을 제안 한다. 해당 calibration 방식은 CDAC의 bridge capacitor의 negative mismatch에 의한 wide code width를 제거한다. 10bit counter를 사용하여 wide code의 개수가 HPC의 2배가 될 때 wide code를 감지 하며 10bit counter의 출력을 calibration block의 shift register를 통해서 narrow code에 재분배할 개수를 계 산한다. 하위 6bit가 모두 1인 코드에서 ±32LSB 범위 안에서 분배개수를 hit 개수로 가지는 ramp signal을 생성하여 wide code width를 제거한다. Calibration 결[3] GORDON ROBERTS, FRIEDRICH TAENZLER, MARK BURNS. (2011). An Introduction to Mixed-Signal IC Test and Measurement (2nd ed.). Oxford University Press[4] Y. Zhu, C. -H. Chan, S. -S. Wong, U. Seng-Pan and R. P. Martins, \"Histogram-Based Ratio Mismatch Calibration for Bridge-DAC in 12-bit 120 MS/s SAR ADC,\" in IEEE Transactions on Very Large Scale Integration (VLSI) Systems, vol. 24, no. 3, pp. 1203-1207, March 2016, doi: 10.1109/TVLSI.2015.2442258."
]